
#### 六维图逻辑调整。

当为选择具体任务是，显示整个项目的六维图。

当选着任务时，显示该任务的六维图。

当六维图某个预算或者成本未输入时，不显示六维图，并提示哪一项没有数据

#### 修正成本导入逻辑
同一个任务的成本只能导入一次，当再次导入该项任务成本时，首先删除之前该项任务下的所有成本，再将重新导入的成本写入数据表，**不允许重复对一个任务导入成本**

## excel重复导入限制

修复计划、合同指标可以重复导入的bug，每次导入新数据都会先删除原有的数据，即出现相同的井号，先把数据库中以前相同井号的数据全部删除，然后再导入新的数据，保证不会有相同井号数据的增量





增加2级成本圆盘显示，利润率

## 三者的WBS要对齐

1. 在进度中新增字段任务名称，进度、成本、收入的任务名称要一致，使用同一个映射，以进度为准。
2. 成本与收入要校对进度的任务名称，如果在进度阶段没有录入任务名称，则成本和收入导入excel表格时需要拒绝录入，并报错并提示任务名称不一致。
3. 成本中的任务收入取收入模块中相同井号，相同任务名称中的所有收入。
4. 收入中的成本，取成本模块中相同井号，相同任务名称中的所有成本。
5. 删除收入模块中的成本字段，删除成本模块中的收入字段，全部统一到一个字段映射。
6. 成本预算中导入模块中新增井号字段。
7. 进度计划导入模块中新增任务名称字段。

#### 继续优化

1. 设计收入评比

2. 所有六维指标都可以调整上下限，保证更符合项目实际要求

3. 六维指标跟着项目属性走，对于日费、总包有不同的选择。新建项目在基本信息中中加入日费/总包的选择

4. 调整成本、收入、进度模块工具栏中，选择合同的选项变为选择项目名称

5. 六维雷达图中，缺失数据的部分显示为0

   

   1. 移除井号前面的井号文本，只显示井号的内容。  3. 不要分开实际与计划，只表明任务名称即可，实际与计划可以使用鼠标互动显示。 4. 移除纵坐标上井号字段的显示，感觉很乱 
   2. 使用分组背景框来区分，在分组背景框左上方显示井号字段的内容，不要加井号的文本。

## 项目立项模块

一、新增项目目标需求：

1. 项目目标目前还是从进度、成本、收入三个维度进行指标选择。

2. 进度：
   2.1 非生产时间占比：非生产时间/生产时间（%）
   2.2 纯钻时间占比：纯钻时间/进尺工作时间（%）
   2.3 搬安周期占比：搬安周期/建井周期（%）
   2.4 进度计划逾期：天

3. 成本：
   3.1 成本控制率：任务总成本/任务总预算（%）
   3.2 间接成本控制率：间接成本/直接成本（%）
   3.3 成本绩效:分数
   3.4 成本细分项控制：材料、人工、设备、服务成本的控制金额：金额

   3.5 百元收入成本：金额

   3.6 每米成本：金额
   3.7 成本超支：单个任务的实际成本/单个任务的总成本（%）

4. 收入：
   4.1  价值工作量：金额
   4.2 收入确认时间差：天
   4.3 收现时间差：天
   4.4 项目利润：%
   4.5 每米进尺收入：
   4.6 年度收入计划完成率：

以上指标都可以自定义参数。

1. 每个项目在以上三个维度中选择相应的指标，不是每个维度都要选择指标，可以选择，可以不选择，但每个项目至少要选择1个指标。
2. 每个指标都可以自定义参数，即指标后面的数字是多少，由用户自定义。

3. 数据聚合：根据指标大于或小于参数的比较结果说明目标完成情况：已完成、未完成。

4. 项目列表需要列出指标，已经指标的完成情况。
5. 项目删除按键

- 在保存项目目标时增加校验：至少选择1个指标；指标代码与维度必须匹配。
- 扩展范围类型：除了“项”，可支持“井号”“任务名称”等更细粒度。
- 导出评估报告：在项目列表或项目详情增加“导出评价PDF”。



## 项目整体信息看板，主页，配置
自定义项目主页的信息看板显示哪些信息，以看板模式展出。

包括 

1. 立项模块：项目基本信息，时间节点，参与单位，分包单位，目标评估结果。
2. 进度模块，
   2.1 图标：六维雷达图、建井周期统计，工作时效对比.
   2.2 字段：生成时效、非生产时效、中完时间、纯钻时间、起下钻时间、进尺工作时间、建井周期
3. 成本模块：
   3.1 图标：成本六维雷达图、项目总体成本分类分布、任务量级成本圆盘与利润率
   3.2 字段：成本列表、项目总预算、项目剩余预算、项目总收入、实际成本、成本绩效、成本偏差、完工尚需估算、完工总估算、直接成本、间接成本
4. 收入模块：
   4.1 图标：收入六维图、收入来源粉笔、价值工作量圆盘、收入列表。
   4.2 字段：项目总收入、项目利润率、价值工作量、开票未回款金额、已收现金额、百元成本收入、每米成本、每米进尺收入、
5. 预警模块：
   5.1 图标 ：严重程度分布、类型统计、预警趋势、项目预警记录列表
6. 以上信息只能查看，不能修改。

配置过后的信息在主页上展示。

注意图标的一致性。

字段看盘设计模式更现代，更高级，更美观，要能直观的看出各个信息
**第一次优化**

1. 立项模块不需要把每个字段都做成看板，只需要一个看板做列表统计。并改名为立项信息。 

1. 将立项信息、参与单位、分包单位的容易横线展示，可以比较明显的看清整个项目的基本情况。 

1. 目标评估结合目标设定页面中评估结果的列表显示样式进行显示。 

1. 进度六维雷达图参照成本六维雷达图统计所选的项目六维。

1. 收入六维雷达图参照统计成本六维雷达图所选的项目六维。

1. 收入字段不做成列表，每个字段做成单独看板。

7. 优化一下看吧的样式，太丑了，要更美观、更现代、更高级。颜色在简洁的基础上，更现代，更高级

#### 优化bug

不一致原因

- 成本六维雷达图使用后端聚合接口 /api/dashboard/cost/sixRadar 返回评分数据，前端直接渲染，因而有数据。apps/web/src/pages/home/HomeDashboard.vue:348–359
- 进度与收入六维雷达图在原仪表盘是前端计算评分，并非后端直接返回；主页看板初始未实现这两者的评分计算，雷达值为 [0,0,0,0,0,0] ，因此显示“暂无数据”。进度雷达设置位置 apps/web/src/pages/home/HomeDashboard.vue:321–329；收入雷达设置位置 apps/web/src/pages/home/HomeDashboard.vue:371–373
已优化

- 主页看板已追加与原仪表盘一致的前端评分计算，使三者来源一致、都可获取数据：
  - 进度六维评分计算并接入合同指标 apps/web/src/pages/home/HomeDashboard.vue:289–303（加载合同）与 apps/web/src/pages/home/HomeDashboard.vue:360–380（计算函数）
  - 收入六维评分计算基于收入汇总行 apps/web/src/pages/home/HomeDashboard.vue:382–405（计算函数）
  - 雷达渲染改为使用计算后的评分数组，空值仍显示“暂无数据”，防止误判。进度雷达渲染 apps/web/src/pages/home/HomeDashboard.vue:323–329；收入雷达渲染 apps/web/src/pages/home/HomeDashboard.vue:372–374
  数据要求

- 进度雷达需要：
  - 进度汇总 /api/dashboard/progress 返回的生产/非生产/中完/纯钻/起下钻/进尺/周期等字段
  - 合同指标 /api/dashboard/progress/contract （已在主页看板中调用）用于评分对标
- 收入雷达需要：
  - 收入汇总 /api/dashboard/revenue/summary 返回的行包含计划收入、已确认、价值工作量、现金等字段，以及计划/实际时间
  若某项目尚未导入进度实际/合同或收入数据，进度/收入雷达仍会显示“暂无数据”；导入后会自动显示评分，与成本雷达保持一致的行为与口径。

#### 后续可扩展

- 主页布局支持拖拽排序与卡片尺寸定制（可追加 layout 字段）
- 模块内字段按项目目标维度的映射规则进行动态选择（与 ProjectGoals 协同）
- 多项目对比模式的主页看板视图（复用预警趋势对比能力）
